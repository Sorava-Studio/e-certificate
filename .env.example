# ============================================
# üìÑ E-CERTIFICATE - ENVIRONMENT VARIABLES
# ============================================
# Copy this file to `.env.local` for development
# ‚ö†Ô∏è  NEVER commit .env.local to version control!
#
# Stack: Next.js 15 + TypeScript + Tailwind + shadcn/ui
#        PostgreSQL (Docker) + Drizzle ORM + BetterAuth
#        Stripe + Resend + File Storage
# ============================================

# ============================================
# ÔøΩ APPLICATION
# ============================================
# Base URL of your application (no trailing slash)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Environment mode
NODE_ENV=development

# ============================================
# üóÑÔ∏è  DATABASE (PostgreSQL + Drizzle ORM)
# ============================================
# PostgreSQL connection string (pooled for app queries)
# Default Docker setup: postgresql://postgres:postgres@localhost:5432/ecertificate
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/ecertificate

# Direct connection for migrations (bypasses pooling)
# Use same credentials as DATABASE_URL unless using connection pooler like Supabase/Neon
DIRECT_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/ecertificate

# Database docker setup (optional)
POSTGRES_USER=e-user
POSTGRES_PASSWORD=e-password
POSTGRES_DB=ecertificate
POSTGRES_PORT=5432
POSTGRES_HOST=localhost
POSTGRES_DOCKER_VOLUME=ecertificate_db_data

# Enable Drizzle query logging in development
DATABASE_LOGGING=true

# ============================================
# üîê AUTHENTICATION (BetterAuth)
# ============================================
# Generate with: openssl rand -base64 32
# This secret is used for JWT signing and encryption
BETTER_AUTH_SECRET=your_better_auth_secret_here

# BetterAuth configuration
BETTER_AUTH_URL=http://localhost:3000

# Trust host header (needed for deployment platforms like Vercel)
BETTER_AUTH_TRUST_HOST=true

# Session duration in seconds (default: 7 days)
BETTER_AUTH_SESSION_MAX_AGE=604800

# Optional: OAuth Providers (Google, GitHub, etc.)
# Get credentials from: https://console.cloud.google.com
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# ============================================
# üí≥ STRIPE (Payments)
# ============================================
# Get your API keys: https://dashboard.stripe.com/apikeys
# Use test keys (sk_test_...) for development
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here

# Webhook signing secret for verifying webhook events
# Get from: https://dashboard.stripe.com/webhooks
# Run `stripe listen --forward-to localhost:3000/api/webhooks/stripe` for local testing
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Optional: Product/Price IDs from Stripe Dashboard
STRIPE_PRICE_ID_BASIC=price_your_basic_price_id_here
STRIPE_PRICE_ID_PRO=price_your_pro_price_id_here

# ============================================
# üìß EMAIL (Resend)
# ============================================
# Get your API key: https://resend.com/api-keys
RESEND_API_KEY=your_resend_api_key_here

# Email addresses
RESEND_FROM_EMAIL=noreply@yourdomain.com
NEXT_PUBLIC_SUPPORT_EMAIL=support@yourdomain.com

# ============================================
# üì¶ FILE STORAGE
# ============================================
# Storage provider: local (for development and small deployments)
STORAGE_PROVIDER=local

# --- Local Storage ---
# Files stored in: /public/uploads
UPLOAD_DIR=./public/uploads

# File upload limits
NEXT_PUBLIC_MAX_FILE_SIZE=10485760  # 10MB in bytes
NEXT_PUBLIC_ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,application/pdf

# ============================================
# üîí SECURITY
# ============================================
# Rate limiting (requests per window)
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000  # 1 minute

# CORS allowed origins (comma-separated, no spaces)
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# ============================================
# üß™ DEVELOPMENT ONLY
# ============================================
# Skip email verification in development
DEV_SKIP_EMAIL_VERIFICATION=true

# Mock external API calls
DEV_MOCK_STRIPE=false

# Verbose logging
DEBUG=false

# ============================================
# üöÄ DEPLOYMENT (Optional)
# ============================================
# Vercel specific variables (auto-populated by Vercel)
# VERCEL_URL=
# VERCEL_ENV=

# ============================================
# üìù QUICK START GUIDE
# ============================================
#
# 1Ô∏è‚É£  Setup Database:
#    docker compose up -d
#    npm run db:push
#
# 2Ô∏è‚É£  Generate Auth Secret:
#    openssl rand -base64 32
#
# 3Ô∏è‚É£  Setup Stripe:
#    - Get test keys from https://dashboard.stripe.com/test/apikeys
#    - Install Stripe CLI: https://stripe.com/docs/stripe-cli
#    - Run: stripe listen --forward-to localhost:3000/api/webhooks/stripe
#
# 4Ô∏è‚É£  Setup Resend:
#    - Create account at https://resend.com
#    - Add and verify your domain
#    - Generate API key
#
# 5Ô∏è‚É£  Start Development:
#    npm run dev
#
# ============================================
# üîó USEFUL LINKS
# ============================================
# Next.js: https://nextjs.org/docs
# Drizzle ORM: https://orm.drizzle.team
# BetterAuth: https://better-auth.com
# Stripe: https://stripe.com/docs/api
# Resend: https://resend.com/docs
# shadcn/ui: https://ui.shadcn.com
#
# ============================================
